# Istio configuration for Authorino ext_authz integration
# Apply with: oc patch istio default -n istio-system --type=merge --patch-file manifests/istio/ext-authz-config.yaml
spec:
  values:
    meshConfig:
      outboundTrafficPolicy:
        mode: REGISTRY_ONLY
      extensionProviders:
        - name: kuadrant-authorization
          envoyExtAuthzGrpc:
            service: authorino-authorino-authorization.kuadrant-system.svc.cluster.local
            port: 50051
            timeout: 5s
            includeRequestBodyInCheck:
              maxRequestBytes: 8192
              allowPartialMessage: true
